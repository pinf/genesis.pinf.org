#!/bin/bash
# Source https://github.com/cadorn/bash.origin
if [ ! -f "$HOME/.bash.origin" ]; then
    # TODO: Alternatively use `wget`
    curl "https://raw.githubusercontent.com/bash-origin/bash.origin/master/bash.origin?t=$(date +%s)" | BO="install" sh
fi
. "$HOME/.bash.origin"
function init {
	eval BO_SELF_BASH_SOURCE="$BO_READ_SELF_BASH_SOURCE"
	BO_deriveSelfDir ___TMP___ "$BO_SELF_BASH_SOURCE"
	local __BO_DIR__="$___TMP___"

	function boot {

		# TODO: Detect if booting self or booting another package.
		bootSelf
	}

	function bootSelf {
		pushd "$__BO_DIR__/../tpl"
			PGS_SYSTEM_ROOT="$__BO_DIR__/.."
			BO_callPlugin "/genesis.live/open-source/codi.sh/node_modules/bash.origin.pinf/bash.origin.pinf" pto turn -vd
		popd
	}

	function signalDone {
		echo "BOOT DONE"
	}


	boot
	signalDone
}
init @$