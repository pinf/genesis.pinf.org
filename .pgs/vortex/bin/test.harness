#!/bin/bash
# Source https://github.com/cadorn/bash.origin
. "$HOME/.bash.origin"
function init {
	eval BO_SELF_BASH_SOURCE="$BO_READ_SELF_BASH_SOURCE"
	BO_deriveSelfDir ___TMP___ "$BO_SELF_BASH_SOURCE"
	local __BO_DIR__="$___TMP___"

	. "$__BO_DIR__/../boot" activate

	BO_checkVerbose "VERBOSE" "$@"

	function runDemos {
		format "$VERBOSE" "HEADER" "Running Tests"
		if [ -e "$PGS_WORKSPACE_ROOT/bin/test" ]; then
			BO_ensure_executable "$PGS_WORKSPACE_ROOT/bin/test"
			pushd "$PGS_WORKSPACE_ROOT" > /dev/null
				"bin/test"
				# TODO: Export test result
			popd > /dev/null
		else
			echo "WARNING: No '$PGS_WORKSPACE_ROOT/bin/test' script found!"
		fi
		format "$VERBOSE" "FOOTER"
	}

	runDemos
}
init $@