#!/bin/bash
# Source https://github.com/cadorn/bash.origin
. "$HOME/.bash.origin"
function init {
	eval BO_SELF_BASH_SOURCE="$BO_READ_SELF_BASH_SOURCE"
	BO_deriveSelfDir ___TMP___ "$BO_SELF_BASH_SOURCE"
	local __BO_DIR__="$___TMP___"

	. "$__BO_DIR__/../boot" activate

	BO_checkVerbose "VERBOSE" "$@"

	function format {
		if [ "$1" != "1" ]; then
			return;
		fi
		if [ "$2" == "HEADER" ]; then
			echo "##################################################";
			echo "# $3";
			echo "##################################################";
		fi
		if [ "$2" == "FOOTER" ]; then
			echo "##################################################";
			echo ""
		fi
	}

	function runClean {
		format "$VERBOSE" "HEADER" "Cleaning"

		pushd "$__BO_DIR__/.." > /dev/null
			BO_run_node "$__BO_DIR__/clean.js" $@
		popd > /dev/null

		export PS1="$PGS_PS1_BEFORE"
		export PATH="$PGS_PATH_BEFORE"

		export PGS_WORKSPACE_ROOT=""
		export PGS_PINF_DIRPATH=""
		export PGS_WORKSPACE_PINF_DIRPATH=""
		export PGS_PACKAGES_DIRPATH=""
		export BO_PACKAGES_DIR=""
		export BO_SYSTEM_CACHE_DIR=""
		export BO_ROOT_SCRIPT_PATH=""

		format "$VERBOSE" "FOOTER"
	}

	runClean $@
}
init $@